/**
 * Zooom.js - the easiest way to enlarge a photo
 * @version v1.0.6
 * @link https://github.com/tomik23/zooom.js
 * @license MIT
 */

var Zooom=function(){"use strict";function t(t,e){for(var o=0;o<e.length;o++){var a=e[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(){function e(t,o){var a=o.padding,i=o.zIndex,n=o.animationTime,r=o.cursor,c=o.overlay,s=o.onLoaded,l=void 0===s?function(){}:s,d=o.onCleared,u=void 0===d?function(){}:d;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.className=t,this.padding=a||80,this.zIndex=i||1,this.animationTime=n||300,this.dataZoomed="data-zoomed",this.overlay="zooom-overlay",this.onLoaded=l,this.onCleared=u,r?(this.cursorIn="cursor: ".concat(r.in,";"),this.cursorOut="cursor: ".concat(r.out,";")):(this.cursorIn="cursor: zoom-in;",this.cursorOut="cursor: zoom-out;"),c){var m=Math.floor(c.opacity);this.color=c.color,this.opacity=m>100?1:m/100}else this.color="#fff",this.opacity=1;this.initial()}var o,a,i;return o=e,(a=[{key:"initial",value:function(){this.createZoomStyle(),this.setDefaultAttr(),this.ceateOverlay(),this.createStyleOverlay("on"),this.createStyleOverlay("off"),document.addEventListener("click",this.addEventImageInit.bind(this)),window.addEventListener("scroll",this.scrollHandler.bind(this));var t=this.debounce(this.removeImgStyle.bind(this),100);window.addEventListener("resize",t)}},{key:"setDefaultAttr",value:function(){for(var t=document.querySelectorAll(".".concat(this.className)),e=0;e<t.length;e++)t[e].setAttribute(this.dataZoomed,!1)}},{key:"debounce",value:function(t,e){var o;return function(){for(var a=arguments.length,i=new Array(a),n=0;n<a;n++)i[n]=arguments[n];var r=function(){o=null,t.apply(void 0,i)};clearTimeout(o),o=setTimeout(r,e)}}},{key:"addEventImageInit",value:function(t){t.preventDefault();var e=t.target,o=e.getAttribute(this.dataZoomed);this.imageZooom=e,"false"===o?this.zooomInit():"true"!==o&&e.id!==this.overlay||this.removeImgStyle()}},{key:"scrollHandler",value:function(){document.querySelector("[".concat(this.dataZoomed,'="true"]'))&&this.removeImgStyle()}},{key:"createZoomStyle",value:function(){var t=".".concat(this.className,"{").concat(this.cursorIn,'};@-webkit-keyframes zooom-fade{0%{opacity:0}}@keyframes zooom-fade{0%{opacity:0}}[data-zoomed="true"]{position:relative;z-index:').concat(this.zIndex+9,";").concat(this.cursorOut,"transition: transform ").concat(this.animationTime,"ms ease-in-out}#zooom-overlay{position:fixed;top:0;left:0;right:0;bottom:0;z-index:").concat(this.zIndex,";").concat(this.cursorOut,"}");this.createStyle(t)}},{key:"createStyle",value:function(t){var e=document.createElement("style");e.appendChild(document.createTextNode(t)),document.head.appendChild(e)}},{key:"removeImgStyle",value:function(){var t=this,e=document.querySelector("[".concat(this.dataZoomed,'="true"]'));e&&(e.removeAttribute("style"),setTimeout((function(){e.setAttribute(t.dataZoomed,!1)}),this.animationTime),this.onCleared(this.imageZooom),this.fadeOut())}},{key:"zooomInit",value:function(){this.imageZooom.setAttribute(this.dataZoomed,!0),this.imageScale(this.imageZooom),this.onLoaded(this.imageZooom),this.fadeIn()}},{key:"ceateOverlay",value:function(){this.overlayd=document.createElement("div"),this.overlayd.id=this.overlay,this.overlayd.setAttribute("data-visible",!1),document.body.appendChild(this.overlayd)}},{key:"fadeIn",value:function(){this.overlayd.className="zooom-overlay-on",this.overlayd.setAttribute("data-visible",!0)}},{key:"fadeOut",value:function(){var t=this;this.overlayd.className="zooom-overlay-off",setTimeout((function(){t.overlayd.setAttribute("data-visible",!1)}),this.animationTime)}},{key:"createStyleOverlay",value:function(t){var e=".zooom-overlay-".concat(t,"{-webkit-animation:show-").concat(t," ").concat(this.animationTime,"ms ease forwards;animation:show-").concat(t," ").concat(this.animationTime,"ms ease forwards;background-color:rgb(255, 255, 255);}@keyframes show-").concat(t,"{ from{opacity:").concat("off"===t?this.opacity:0,";}to{opacity:").concat("off"===t?0:this.opacity," }}@-webkit-keyframes show-").concat(t,"{ from{opacity:").concat("off"===t?this.opacity:0,";}to{opacity:").concat("off"===t?0:this.opacity," }}");this.createStyle(e)}},{key:"imageScale",value:function(t){var e=t.naturalWidth,o=t.naturalHeight,a=t.clientWidth,i=t.clientHeight,n=this.imageZooom.getBoundingClientRect(),r=n.left,c=n.top,s=e/a,l=window.innerHeight,d=document.documentElement.clientWidth,u=l-this.padding,m=d-this.padding,h={x:d/2-(r+a/2),y:l/2-(c+i/2)},y=1;y=e<m&&o<u?s:e/o<m/u?u/o*s:m/e*s,y<=1&&(y=1),this.imageZooom.setAttribute("style","transform: translate(".concat(h.x,"px, ").concat(h.y,"px) scale(").concat(y,") translateZ(0); "))}}])&&t(o.prototype,a),i&&t(o,i),e}()}();
