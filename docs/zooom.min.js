/**
 * Zooom.js - the easiest way to enlarge a photo
 * @version v1.0.6
 * @link https://github.com/tomik23/zooom.js
 * @license MIT
 */

var Zooom=function(){"use strict";function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(){function e(t,o){var i=o.padding,a=o.zIndex,n=o.animationTime,r=o.cursor,s=o.overlay,c=o.onLoaded,l=void 0===c?function(){}:c,d=o.onCleared,u=void 0===d?function(){}:d;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.className=t,this.padding=i||80,this.zIndex=a||1,this.animationTime=n||300,this.dataZoomed="data-zoomed",this.overlay="zooom-overlay",this.onLoaded=l,this.onCleared=u,r?(this.cursorIn="cursor: ".concat(r.in,";"),this.cursorOut="cursor: ".concat(r.out,";")):(this.cursorIn="cursor: zoom-in;",this.cursorOut="cursor: zoom-out;"),s){var m=Math.floor(s.opacity);this.color=s.color,this.opacity=m>100?1:m/100}else this.color="#fff",this.opacity=1;this.initial()}var o,i,a;return o=e,(i=[{key:"initial",value:function(){this.createZoomStyle(),this.setDefaultAttr(),this.ceateOverlay(),document.addEventListener("click",this.addEventImageInit.bind(this)),window.addEventListener("scroll",this.scrollHandler.bind(this));var t=this.debounce(this.removeImgStyle.bind(this),100);window.addEventListener("resize",t)}},{key:"setDefaultAttr",value:function(){for(var t=document.querySelectorAll(".".concat(this.className)),e=0;e<t.length;e++)t[e].setAttribute(this.dataZoomed,!1)}},{key:"debounce",value:function(t,e){var o;return function(){for(var i=arguments.length,a=new Array(i),n=0;n<i;n++)a[n]=arguments[n];var r=function(){o=null,t.apply(void 0,a)};clearTimeout(o),o=setTimeout(r,e)}}},{key:"addEventImageInit",value:function(t){t.preventDefault();var e=t.target,o=e.getAttribute(this.dataZoomed);this.imageZooom=e,"false"===o?this.zooomInit():"true"!==o&&e.id!==this.overlay||this.removeImgStyle()}},{key:"scrollHandler",value:function(){document.querySelector("[".concat(this.dataZoomed,'="true"]'))&&this.removeImgStyle()}},{key:"createZoomStyle",value:function(){var t=document.createElement("style"),e=".".concat(this.className,"{").concat(this.cursorIn,'};@-webkit-keyframes zooom-fade{0%{opacity:0}}@keyframes zooom-fade{0%{opacity:0}}[data-zoomed="true"]{position:relative;z-index:').concat(this.zIndex+9,";").concat(this.cursorOut,"transition: transform ").concat(this.animationTime,"ms ease-in-out}#zooom-overlay{position:fixed;top:0;left:0;right:0;bottom:0;z-index:").concat(this.zIndex,";").concat(this.cursorOut,"}");t.appendChild(document.createTextNode(e)),document.head.appendChild(t)}},{key:"removeImgStyle",value:function(){var t=this,e=document.querySelector("[".concat(this.dataZoomed,'="true"]'));e&&(e.removeAttribute("style"),setTimeout((function(){e.setAttribute(t.dataZoomed,!1),t.fadeOut()}),this.animationTime),this.onCleared(this.imageZooom))}},{key:"zooomInit",value:function(){this.imageZooom.setAttribute(this.dataZoomed,!0),this.imageScale(this.imageZooom),this.fadeIn(),this.onLoaded(this.imageZooom)}},{key:"ceateOverlay",value:function(){this.overlayd=document.createElement("div"),this.overlayd.id=this.overlay,this.overlayd.setAttribute("style","background-color: ".concat(this.color,"; display: none;")),document.body.appendChild(this.overlayd)}},{key:"fadeIn",value:function(){var t=0,e=this.opacity,o=this.overlay,i=this.animationTime/1e4;requestAnimationFrame((function a(){var n=document.getElementById(o);t<e&&(t+=i),n.style.opacity=t>=1?1:t-i,n.style.display="block",t<e?requestAnimationFrame(a):cancelAnimationFrame(a)}))}},{key:"fadeOut",value:function(){var t=this.opacity,e=this.overlay,o=t;requestAnimationFrame((function t(){var i=document.getElementById(e);o>0&&(o-=.1),i.style.opacity=o,o>=.1?requestAnimationFrame(t):(i.style.opacity=0,i.style.display="none",cancelAnimationFrame(t))}))}},{key:"imageScale",value:function(t){var e=t.naturalWidth,o=t.naturalHeight,i=t.clientWidth,a=t.clientHeight,n=this.imageZooom.getBoundingClientRect(),r=n.left,s=n.top,c=e/i,l=window.innerHeight,d=document.documentElement.clientWidth,u=l-this.padding,m=d-this.padding,h={x:d/2-(r+i/2),y:l/2-(s+a/2)},y=1;y=e<m&&o<u?c:e/o<m/u?u/o*c:m/e*c,y<=1&&(y=1),this.imageZooom.setAttribute("style","transform: translate(".concat(h.x,"px, ").concat(h.y,"px) scale(").concat(y,") translateZ(0);"))}}])&&t(o.prototype,i),a&&t(o,a),e}()}();
