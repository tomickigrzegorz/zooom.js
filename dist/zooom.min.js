/*!
* Zooom.js - the easiest way to enlarge a photo
* @version v1.1.1
* @link https://github.com/tomik23/zooom.js
* @license MIT
*/
var Zooom=function(){"use strict";const t=(t,i=300)=>{let o;return function(...s){clearTimeout(o),o=setTimeout(()=>t.apply(this,s),i)}};return class{constructor(i,{zIndex:o,animationTime:s,cursor:e,overlay:n,onResize:h=(()=>{}),onOpen:a=(()=>{}),onClose:d=(()=>{})}){this.t=()=>{window.addEventListener("resize",t(()=>this.i(),70)),window.addEventListener("DOMContentLoaded",this.i)},this.i=()=>{["scroll","resize","click"].map(t=>{this.o()?window.removeEventListener(t,"click"===t?this.h:this.m):window.addEventListener(t,"click"===t?this.h:this.m)})},this.u=({in:t,out:i}={in:"zoom-in",out:"zoom-out"})=>{this.l="cursor: "+t,this.g=`cursor: ${i};`},this.h=t=>{let{target:i}=t;const o=i.getAttribute(this.$);if("false"===o){const t=i.getAttribute("data-zooom-big");t?this.v(i,t).then(()=>{this.p=i,this.k(),document.body.classList.remove("zooom-loading")}):(this.p=i,this.k())}else"true"!==o&&i.id!==this.T||this.m()},this.v=(t,i)=>new Promise((o,s)=>{let e=new Image;e.onload=function(){o("image loaded")},e.onerror=function(){s(`image ${i} not loaded`)},document.body.classList.add("zooom-loading"),e.src=i,t.src=e.src,t.removeAttribute("data-zooom-big")}),this.m=()=>{const t=document.querySelector(`[${this.$}="true"]`);t&&(this.C(),setTimeout(()=>{t.setAttribute(this.$,"false")},this.I),this.O(this.p),(t=>{t.classList.remove("zooom-overlay-in"),t.removeAttribute("style")})(this.W))},this.j=()=>{const t=`#zooom-overlay{position:fixed;pointer-events:none;width:100%;background:rgba(255,255,255,0);height:100%;top:0;justify-content:center;align-items:center;z-index:${this.D};margin:auto;-webkit-transition:background ${this.I}ms ease-in-out;transition:background ${this.I}ms ease-in-out;${this.g}}`,i=`.${this.H}{${this.l}};@-webkit-keyframes zooom-fade{0%{opacity:0}}@keyframes zooom-fade{0%{opacity:0}}[data-zoomed="true"]{${this.g}position:relative;z-index:${this.D+9};transition:transform ${this.I}ms ease-in-out;}`;document.head.insertAdjacentHTML("beforeend",`<style>${i}${t}</style>`)},this.k=()=>{this.p.setAttribute(this.$,"true"),this.L(this.p),((t,i)=>{t.className="zooom-overlay-in",t.style.pointerEvents="auto",t.style.background=String(i)})(this.W,this.M),this.P(this.p)},this.L=t=>{let i=t.currentSrc||t.src,{width:o,height:s,left:e,top:n}=t.getBoundingClientRect();const{clientWidth:h,clientHeight:a,offsetWidth:d}=document.documentElement,c=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,m=(h-(h-d))/2-e-o/2,r=(a-s)/2-n,u=s/o;let l=t.naturalWidth;l>=h&&(l=h);const z=l*u;z>=a&&(l=l*a/z);const f=l!==o?l/o:1,g=this.R;g.src=i,g.width=o,g.height=s,g.style.top=n+c+"px",g.style.left=e+"px",g.style.width=o+"px",g.style.height=s+"px",g.className="zooom-clone",document.body.appendChild(g),g.offsetWidth,g.setAttribute("data-zoomed","true"),g.style.position="absolute",g.style.transform=`matrix(${f},0,0,${f},${m},${r})`,setTimeout(()=>{this.p.style.setProperty("visibility","hidden")},50),g.addEventListener("click",this.C)},this.C=()=>{this.R.style.removeProperty("transform"),setTimeout(()=>{var t;null===(t=this.R.parentNode)||void 0===t||t.removeChild(this.R),this.p.style.removeProperty("visibility")},this.I)},this.H=i,this.I=s||300,this.D=o||1,this.$="data-zoomed",this.T="zooom-overlay",this.W=document.createElement("div"),this.R=document.createElement("img"),this.o=h,this.P=a,this.O=d,this.M=n,this.u(e),this.W.id=this.T,document.body.appendChild(this.W),[].slice.call(document.querySelectorAll("."+i)).map(t=>{t.setAttribute("data-zoomed","false")}),this.t(),this.j()}}}();
