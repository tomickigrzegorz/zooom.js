/*!
* Zooom.js - the easiest way to enlarge a photo
* @version v1.1.0
* @link https://github.com/tomik23/zooom.js
* @license MIT
*/
var Zooom=function(){"use strict";return function(t,o){var e=this,n=void 0===o?{}:o,i=n.zIndex,a=n.animationTime,c=n.cursor,r=n.overlay,s=n.onResize,d=void 0===s?function(){}:s,l=n.onOpen,m=void 0===l?function(){}:l,u=n.onClose,v=void 0===u?function(){}:u;this.eventHandle=function(){var t,o,n;window.addEventListener("resize",(t=function(){return e.event()},void 0===(o=70)&&(o=300),function(){for(var e=this,i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];clearTimeout(n),n=setTimeout((function(){return t.apply(e,i)}),o)})),window.addEventListener("load",e.event)},this.event=function(){["scroll","resize","click"].map((function(t){e.onResize()?window.removeEventListener(t,"click"===t?e.handleClick:e.handleEvent):window.addEventListener(t,"click"===t?e.handleClick:e.handleEvent)}))},this.overlayConfig=function(t){var o=void 0===t?{color:"#fff",opacity:100}:t,n=o.color,i=o.opacity;e.color=n,e.opacity=i?Math.floor(i)>=100?1:Math.floor(i)/100:1},this.cursorType=function(t){var o=void 0===t?{in:"zoom-in",out:"zoom-out"}:t,n=o.in,i=o.out;e.cursorIn="cursor: ".concat(n),e.cursorOut="cursor: ".concat(i,";")},this.handleClick=function(t){var o=t.target,n=o.getAttribute(e.dataAttr);if("false"===n){var i=o.getAttribute("data-zooom-big");i?e.loadImage(o,i).then((function(){e.imageZooom=o,e.zooomInit(),document.body.classList.remove("zooom-loading")})):(e.imageZooom=o,e.zooomInit())}else"true"!==n&&o.id!==e.overlayId||e.handleEvent()},this.loadImage=function(t,o){return new Promise((function(e,n){var i=new Image;i.onload=function(){e("image loaded")},i.onerror=function(){n("image ".concat(o," not loaded"))},document.body.classList.add("zooom-loading"),i.src=o,t.src=i.src,t.removeAttribute("data-zooom-big")}))},this.handleEvent=function(){var t=document.querySelector("[".concat(e.dataAttr,'="true"]'));t&&(e.reset(),setTimeout((function(){t.setAttribute(e.dataAttr,"false")}),e.animTime),e.onClose(e.imageZooom),function(t){t.classList.remove("zooom-overlay-in"),t.removeAttribute("style")}(e.overlayLayer))},this.styleHead=function(){var t="#zooom-overlay{position:fixed;opacity:0;pointer-events:none;background:".concat(e.color,";width:100%;height:100%;top:0;justify-content:center;align-items:center;z-index:").concat(e.zIndex,";margin:auto;-webkit-transition:opacity ").concat(e.animTime,"ms ease-in-out;transition:opacity ").concat(e.animTime,"ms ease-in-out;").concat(e.cursorOut,"}"),o=".".concat(e.element,"{").concat(e.cursorIn,'};@-webkit-keyframes zooom-fade{0%{opacity:0}}@keyframes zooom-fade{0%{opacity:0}}[data-zoomed="true"]{').concat(e.cursorOut,"position:relative;z-index:").concat(e.zIndex+9,";transition:transform ").concat(e.animTime,"ms ease-in-out;}");document.head.insertAdjacentHTML("beforeend","<style>".concat(o).concat(t,"</style>"))},this.zooomInit=function(){var t=e.imageZooom;t.setAttribute(e.dataAttr,"true"),e.cloneImg(t),function(t,o){t.className="zooom-overlay-in",t.style.opacity=String(o),t.style.pointerEvents="auto"}(e.overlayLayer,e.opacity),e.onOpen(t)},this.cloneImg=function(t){var o=t.currentSrc||t.src,n=t.getBoundingClientRect(),i=n.width,a=n.height,c=n.left,r=n.top,s=document.documentElement,d=s.clientWidth,l=s.clientHeight,m=s.offsetWidth,u=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,v=(d-(d-m))/2-c-i/2,h=(l-a)/2-r,f=a/i,y=t.naturalWidth;y>=d&&(y=d);var p=y*f;p>=l&&(y=y*l/p);var g=y!==i?y/i:1,z=e.clonedImg;z.src=o,z.width=i,z.height=a,z.style.top="".concat(r+u,"px"),z.style.left="".concat(c,"px"),z.style.width="".concat(i,"px"),z.style.height="".concat(a,"px"),z.className="zooom-clone",document.body.appendChild(z),z.offsetWidth,z.setAttribute("data-zoomed","true"),z.style.position="absolute",z.style.transform="matrix(".concat(g,",0,0,").concat(g,",").concat(v,",").concat(h,")"),setTimeout((function(){e.imageZooom.style.visibility="hidden"}),50),z.addEventListener("click",e.reset)},this.reset=function(){var t=e.clonedImg;t.style.removeProperty("transform"),setTimeout((function(){var o;null===(o=t.parentNode)||void 0===o||o.removeChild(t),e.imageZooom.removeAttribute("style")}),e.animTime)},this.element=t,this.animTime=a||300,this.zIndex=i||1,this.dataAttr="data-zoomed",this.overlayId="zooom-overlay",this.overlayLayer=document.createElement("div"),this.clonedImg=document.createElement("img"),this.onResize=d,this.onOpen=m,this.onClose=v,this.cursorType(c),this.overlayConfig(r);var h=this.overlayLayer;h.id=this.overlayId,document.body.appendChild(h),[].slice.call(document.querySelectorAll(".".concat(t))).map((function(t){t.setAttribute("data-zoomed","false")})),this.eventHandle(),this.styleHead()}}();
