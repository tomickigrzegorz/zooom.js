/*!
* Zooom.js - the easiest way to enlarge a photo
* @version v1.1.2
* @link https://github.com/tomickigrzegorz/zooom.js
* @license MIT
*/
const t=(t,i=300)=>{let o;return function(...s){clearTimeout(o),o=setTimeout((()=>t.apply(this,s)),i)}};class i{constructor(i,{zIndex:o,animationTime:s,cursor:e,overlay:h,onResize:n=(()=>{}),onOpen:a=(()=>{}),onClose:d=(()=>{})}){this.t=()=>{window.addEventListener("resize",t((()=>this.i()),70)),window.addEventListener("DOMContentLoaded",this.i)},this.i=()=>{["scroll","resize","click"].map((t=>{this.o()?window.removeEventListener(t,"click"===t?this.h:this.m):window.addEventListener(t,"click"===t?this.h:this.m)}))},this.u=({in:t,out:i}={in:"zoom-in",out:"zoom-out"})=>{this.l=`cursor: ${t}`,this.$=`cursor: ${i};`},this.h=t=>{let{target:i}=t;const o=i.getAttribute(this.g);if("false"===o){const t=i.getAttribute("data-zooom-big");t?this.p(i,t).then((()=>{this.v=i,this.k(),document.body.classList.remove("zooom-loading")})):(this.v=i,this.k())}else"true"!==o&&i.id!==this.T||this.m()},this.p=(t,i)=>new Promise(((o,s)=>{let e=new Image;e.onload=function(){o("image loaded")},e.onerror=function(){s(`image ${i} not loaded`)},document.body.classList.add("zooom-loading"),e.src=i,t.src=e.src,t.removeAttribute("data-zooom-big")})),this.m=()=>{const t=document.querySelector(`[${this.g}="true"]`);t&&(this.C(),setTimeout((()=>{t.setAttribute(this.g,"false")}),this.I),this.O(this.v),(t=>{t.classList.remove("zooom-overlay-in"),t.removeAttribute("style")})(this.W))},this.j=()=>{const t=`#zooom-overlay{position:fixed;pointer-events:none;width:100%;background:rgba(255,255,255,0);height:100%;top:0;justify-content:center;align-items:center;z-index:${this.D};margin:auto;-webkit-transition:background ${this.I}ms ease-in-out;transition:background ${this.I}ms ease-in-out;${this.$}}`,i=`.${this.H}{${this.l}};@-webkit-keyframes zooom-fade{0%{opacity:0}}@keyframes zooom-fade{0%{opacity:0}}[data-zoomed="true"]{${this.$}position:relative;z-index:${this.D+9};transition:transform ${this.I}ms ease-in-out;}`;document.head.insertAdjacentHTML("beforeend",`<style>${i}${t}</style>`)},this.k=()=>{this.v.setAttribute(this.g,"true"),this.L(this.v),((t,i)=>{t.className="zooom-overlay-in",t.style.pointerEvents="auto",t.style.background=String(i)})(this.W,this.M),this.P(this.v)},this.L=t=>{let i=t.currentSrc||t.src,{width:o,height:s,left:e,top:h}=t.getBoundingClientRect();const{clientWidth:n,clientHeight:a,offsetWidth:d}=document.documentElement,m=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,c=(n-(n-d))/2-e-o/2,r=(a-s)/2-h,u=s/o;let l=t.naturalWidth;l>=n&&(l=n);const $=l*u;$>=a&&(l=l*a/$);const z=l!==o?l/o:1,f=this.R;f.src=i,f.width=o,f.height=s,f.style.top=`${h+m}px`,f.style.left=`${e}px`,f.style.width=`${o}px`,f.style.height=`${s}px`,f.className="zooom-clone",document.body.appendChild(f),f.offsetWidth,f.setAttribute("data-zoomed","true"),f.style.position="absolute",f.style.transform=`matrix(${z},0,0,${z},${c},${r})`,setTimeout((()=>{this.v.style.setProperty("visibility","hidden")}),50),f.addEventListener("click",this.C)},this.C=()=>{this.R.style.removeProperty("transform"),setTimeout((()=>{var t;null===(t=this.R.parentNode)||void 0===t||t.removeChild(this.R),this.v.style.removeProperty("visibility")}),this.I)},this.H=i,this.I=s||300,this.D=o||1,this.g="data-zoomed",this.T="zooom-overlay",this.W=document.createElement("div"),this.R=document.createElement("img"),this.o=n,this.P=a,this.O=d,this.M=h,this.u(e),this.W.id=this.T,document.body.appendChild(this.W),[].slice.call(document.querySelectorAll(`.${i}`)).map((t=>{t.setAttribute("data-zoomed","false")})),this.t(),this.j()}}export{i as default};
