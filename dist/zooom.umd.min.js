/*!
* Zooom.js - the easiest way to enlarge a photo
* @version v1.1.3
* @link https://github.com/tomickigrzegorz/zooom.js
* @license MIT
*/
!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):(t="undefined"!=typeof globalThis?globalThis:t||self).Zooom=i()}(this,(function(){"use strict";const t=(t,i=300)=>{let o;return function(...s){clearTimeout(o),o=setTimeout((()=>t.apply(this,s)),i)}};return class{constructor(i,{zIndex:o,animationTime:s,cursor:e,overlay:n,onResize:h=(()=>{}),onOpen:d=(()=>{}),onClose:a=(()=>{})}){this.t=()=>{window.addEventListener("resize",t((()=>this.i()),70)),window.addEventListener("DOMContentLoaded",this.i)},this.i=()=>{["scroll","resize","click"].map((t=>{this.o()?window.removeEventListener(t,"click"===t?this.h:this.m):window.addEventListener(t,"click"===t?this.h:this.m)}))},this.u=({in:t,out:i}={in:"zoom-in",out:"zoom-out"})=>{this.l=`cursor: ${t}`,this.$=`cursor: ${i};`},this.h=t=>{let{target:i}=t;const o=i.getAttribute(this.g);if("false"===o){const t=i.getAttribute("data-zooom-big");t?this.p(i,t).then((()=>{this.v=i,this.k(),document.body.classList.remove("zooom-loading")})):(this.v=i,this.k())}else"true"!==o&&i.id!==this.T||this.m()},this.p=(t,i)=>new Promise(((o,s)=>{let e=new Image;e.onload=function(){o("image loaded")},e.onerror=function(){s(`image ${i} not loaded`)},document.body.classList.add("zooom-loading"),e.src=i,t.src=e.src,t.removeAttribute("data-zooom-big")})),this.m=()=>{const t=document.querySelector(`[${this.g}="true"]`);t&&(this.j(),setTimeout((()=>{t.setAttribute(this.g,"false")}),this.C),this.I(this.v),(t=>{t.classList.remove("zooom-overlay-in"),t.removeAttribute("style")})(this.O))},this.W=()=>{const t=`#zooom-overlay{position:fixed;pointer-events:none;width:100%;background:rgba(255,255,255,0);height:100%;top:0;justify-content:center;align-items:center;z-index:${this.D};margin:auto;-webkit-transition:background ${this.C}ms ease-in-out;transition:background ${this.C}ms ease-in-out;${this.$}}`,i=`.${this.H}{${this.l}};@-webkit-keyframes zooom-fade{0%{opacity:0}}@keyframes zooom-fade{0%{opacity:0}}[data-zoomed="true"]{${this.$}position:relative;z-index:${this.D+9};transition:transform ${this.C}ms ease-in-out;}`;document.head.insertAdjacentHTML("beforeend",`<style>${i}${t}</style>`)},this.k=()=>{this.v.setAttribute(this.g,"true"),this.L(this.v),((t,i)=>{t.className="zooom-overlay-in",t.style.pointerEvents="auto",t.style.background=String(i)})(this.O,this.M),this.P(this.v)},this.L=t=>{let i=t.currentSrc||t.src,{width:o,height:s,left:e,top:n}=t.getBoundingClientRect();const{clientWidth:h,clientHeight:d,offsetWidth:a}=document.documentElement,c=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,m=(h-(h-a))/2-e-o/2,u=(d-s)/2-n,r=s/o;let l=t.naturalWidth;l>=h&&(l=h);const f=l*r;f>=d&&(l=l*d/f);const $=l!==o?l/o:1,z=this.R;z.src=i,z.width=o,z.height=s,z.style.top=`${n+c}px`,z.style.left=`${e}px`,z.style.width=`${o}px`,z.style.height=`${s}px`,z.className="zooom-clone",document.body.appendChild(z),z.offsetWidth,z.setAttribute("data-zoomed","true"),z.style.position="absolute",z.style.transform=`matrix(${$},0,0,${$},${m},${u})`,setTimeout((()=>{this.v.style.setProperty("visibility","hidden")}),50),z.addEventListener("click",this.j)},this.j=()=>{this.R.style.removeProperty("transform"),setTimeout((()=>{var t;null===(t=this.R.parentNode)||void 0===t||t.removeChild(this.R),this.v.style.removeProperty("visibility")}),this.C)},this.H=i,this.C=s||300,this.D=o||1,this.g="data-zoomed",this.T="zooom-overlay",this.O=document.createElement("div"),this.R=document.createElement("img"),this.o=h,this.P=d,this.I=a,this.M=n,this.u(e),this.O.id=this.T,document.body.appendChild(this.O),[].slice.call(document.querySelectorAll(`.${i}`)).map((t=>{t.setAttribute("data-zoomed","false")})),this.t(),this.W()}}}));
